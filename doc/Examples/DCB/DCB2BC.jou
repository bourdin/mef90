reset
#{L1 = 1.25}
#{L2 = 4.}
#{L3 = 1}
#{R = .25}
#{xc = 2.}
#{yc = .01}
#{H1 = 1.}
#{H2 = 2.}
#{h=.05}
#{hstr = tostring(h)}

create vertex {xc} 0 0
create vertex 0 {-yc} 0
create vertex 0 {-H1} 0
create vertex {L1} {-H1} 0
create vertex {L1+L2} {-H1-H2} 0
create vertex {L1+L2+L3} {-H1-H2} 0
create vertex {L1+L2+L3} {H1+H2} 0
create vertex {L1+L2} {H1+H2} 0
create vertex {L1} {H1} 0
create vertex 0 {H1} 0
create vertex 0 {yc} 0

create surface vertex all
create surface ellipse major radius {R} minor radius {R} zplane 
move Surface 2 location {H1/2} {H1/2} 0
imprint surface all with curve in surface 2
move Surface 2 location {H1/2} {-H1/2} 0
imprint surface all with curve in surface 2
delete surface 2 3 5 

create curve location {L1} {-H1} 0 location {L1} {H1} 0
imprint surface all with curve {Id("curve")}

block 1 surface 7
block 2 surface 8 9
block 30 curve 13
block 40 surface 14

nodeset 60 curve 18 19 20 21

draw block all
hardcopy "DCB2BC.png" png 

surface all scheme tridelaunay size {h}
tridelaunay point placement gq
mesh surface all
smooth surface all


block 1 to 9 element type tri3
block 10 to 99 element type bar2
#{filename = Quote("DCB2-"//hstr//"-tri3.gen")}
export mesh {filename} dimension 2 block all overwrite

block 1 to 9 element type tri6
block 10 to 99 element type bar3
#{filename = Quote("DCB2-"//hstr//"-tri6.gen")}
export mesh {filename} dimension 2 block all overwrite




